<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Caynana.AI</title>

<style>
:root{
  --bg:#050505;
  --panel:#0b0b0b;
  --text:#e8e8e8;
  --muted:#a0a0a0;

  --gold:#ffb300;
  --gold2:#ff8f00;

  --stroke:rgba(255,255,255,0.85);
  --ink:rgba(0,0,0,0.95);
}

*{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
  color:var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  overflow:hidden;
}

.phone{
  width:100%;
  max-width:420px;
  height:100%;
  max-height:900px;
  background: radial-gradient(1200px 700px at 50% -10%, rgba(255,179,0,0.10), transparent 55%),
              radial-gradient(900px 500px at 50% 20%, rgba(255,143,0,0.06), transparent 55%),
              var(--bg);
  position:relative;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

@media(min-width: 500px){
  .phone{
    border-radius:40px;
    box-shadow: 0 0 0 10px #111, 0 30px 80px rgba(0,0,0,0.8);
    height:95vh;
  }
}

/* TOPBAR */
.topbar{
  position:absolute;
  inset:0 0 auto 0;
  height:60px;
  padding:0 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  z-index:50;
}

.menuBtn{
  background:none;border:none;
  font-size:24px;
  color:#666;
  cursor:pointer;
  padding:6px;
}
.rightDot{
  width:8px;height:8px;border-radius:50%;
  background:#444;
}

.statusPill{
  position:absolute;
  top:66px; right:12px;
  z-index:60;
  font-size:11px;
  color:#888;
  background: rgba(0,0,0,0.35);
  border:1px solid #222;
  border-radius:999px;
  padding:6px 10px;
  backdrop-filter: blur(4px);
}

/* HEADER */
.header{
  height:230px;
  margin-top:20px;
  flex-shrink:0;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  z-index:10;
  transition: height .25s ease;
}
body.keyboard-open .header{ height:170px; }

.eyes-container{
  display:flex;
  gap:26px;
  transform: scale(0.95);
  transition: transform .25s ease;
}

/* EYE WRAPPER */
.eye{
  width:155px;
  height:110px;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;

  /* per-eye state vars */
  --lidTop: 0%;
  --lidBot: 0%;
  --browY: 0px;
  --browRot: 0deg;
  --browLift: 0px;

  /* gaze */
  --gx: 0px;
  --gy: 0px;
}

/* BROW */
.brow{
  position:absolute;
  top:4px;
  left:50%;
  transform: translateX(-50%) translateY(var(--browY)) rotate(var(--browRot));
  width:118px;
  height:26px;
  z-index:40;
  filter: drop-shadow(0 2px 10px rgba(0,0,0,0.75));
  transition: transform .28s cubic-bezier(.2,1.4,.2,1);
}
.brow:before{
  content:"";
  position:absolute; inset:0;
  border-radius:999px;
  background:
    radial-gradient(140px 26px at 50% 80%, rgba(0,0,0,0) 52%, rgba(15,15,15,0.98) 63%, rgba(0,0,0,0) 76%),
    linear-gradient(90deg, rgba(0,0,0,0), rgba(40,40,40,0.9) 30%, rgba(10,10,10,0.95) 55%, rgba(0,0,0,0));
  clip-path: polygon(0% 70%, 12% 44%, 34% 28%, 55% 25%, 74% 30%, 90% 46%, 100% 70%, 100% 100%, 0% 100%);
  opacity:.95;
}
.brow:after{
  content:"";
  position:absolute;
  right:2px;
  top:14px;
  width:30px;
  height:10px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,0.95));
  transform: rotate(-12deg);
  opacity:.85;
}

/* LASHES + LINER */
.lashes{
  position:absolute;
  top:22px;
  left:50%;
  transform: translateX(-50%);
  width:164px;
  height:52px;
  z-index:35;
  pointer-events:none;
  opacity:.92;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.8));
}
.lashes:before{
  content:"";
  position:absolute; inset:0;
  background:
    repeating-linear-gradient(
      105deg,
      rgba(0,0,0,0) 0px,
      rgba(0,0,0,0) 7px,
      rgba(255,255,255,0.10) 8px,
      rgba(255,255,255,0.10) 9px,
      rgba(0,0,0,0) 10px,
      rgba(0,0,0,0) 14px
    );
  mask-image: radial-gradient(170px 74px at 50% 98%, rgba(0,0,0,0) 46%, rgba(0,0,0,1) 64%);
}
.lashes:after{
  content:"";
  position:absolute;
  left:12px; right:12px; top:10px; bottom:0;
  border-top:3px solid rgba(0,0,0,0.90);
  border-radius:0 0 80px 80px;
  transform: rotate(-2deg);
  opacity:.80;
}

.liner{
  position:absolute;
  top:32px;
  left:50%;
  transform: translateX(-50%);
  width:158px;
  height:40px;
  z-index:34;
  pointer-events:none;
  opacity:.88;
}
.liner:before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(180px 62px at 50% 92%, rgba(0,0,0,0) 50%, rgba(0,0,0,0.98) 61%, rgba(0,0,0,0) 74%),
    linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,0.92) 25%, rgba(0,0,0,0.92) 75%, rgba(0,0,0,0));
  clip-path: polygon(0% 88%, 8% 62%, 22% 44%, 42% 34%, 60% 36%, 78% 46%, 92% 64%, 100% 84%, 100% 100%, 0% 100%);
}
.liner:after{
  content:"";
  position:absolute;
  right:-7px;
  top:20px;
  width:30px;
  height:10px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(0,0,0,0.96), rgba(0,0,0,0));
  transform: rotate(-14deg);
}

/* EYE CLIP (prevents overflow, makes it premium) */
.eye-clip{
  position:absolute;
  top:38px;
  left:50%;
  transform: translateX(-50%);
  width:150px;
  height:76px;
  border-radius: 60% 60% 52% 52% / 75% 75% 52% 52%;
  overflow:hidden;
  z-index:20;
}

/* Eye border / glass */
.eye-border{
  position:absolute;
  inset:0;
  border-radius: inherit;
  border: 2px solid rgba(255,255,255,0.85);
  background: rgba(0,0,0,0.30);
  box-shadow:
    0 0 4px rgba(255,255,255,0.55),
    0 0 14px rgba(255,179,0,0.35),
    0 0 26px rgba(255,179,0,0.18),
    inset 0 -14px 22px rgba(0,0,0,0.85),
    inset 0 10px 12px rgba(255,255,255,0.05);
}

/* Iris group (moves with gaze, clamped in JS) */
.iris-group{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -50%) translate(var(--gx), var(--gy));
  width: 44px;
  height: 44px;
  border-radius:50%;
  transition: transform 0.08s linear;
  z-index:5;
}

/* iris */
.iris{
  width:100%;height:100%;
  border-radius:50%;
  background:
    radial-gradient(circle at 35% 35%, rgba(255,179,0,0.95) 0%, rgba(150,90,0,0.75) 36%, rgba(30,18,0,0.88) 72%),
    radial-gradient(circle at 70% 75%, rgba(255,143,0,0.22), rgba(0,0,0,0) 55%);
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 0 18px rgba(255,179,0,0.30);
  position:relative;
}
.pupil{
  position:absolute;
  left:50%;top:50%;
  transform: translate(-50%,-50%);
  width: 18px;height:18px;
  border-radius:50%;
  background:#000;
  box-shadow: 0 0 10px rgba(255,179,0,0.18);
}
.spec{
  position:absolute;
  left:34%;
  top:28%;
  width:7px;height:7px;
  border-radius:50%;
  background: rgba(255,255,255,0.92);
  filter: blur(0.4px);
}
.gloss{
  position:absolute;
  inset:0;
  border-radius:50%;
  background: radial-gradient(circle at 30% 28%, rgba(255,255,255,0.20) 0%, rgba(255,255,255,0.06) 26%, rgba(0,0,0,0) 56%);
  pointer-events:none;
}

/* lids controlled by vars */
.lid-top, .lid-bot{
  position:absolute;
  left:50%;
  transform: translateX(-50%);
  width: 170px;
  background: var(--bg);
  z-index:10;
}
.lid-top{
  top:-2px;
  height: var(--lidTop);
  border-bottom: 2px solid #111;
  border-radius: 0 0 80px 80px;
  transition: height 0.10s linear;
}
.lid-bot{
  bottom:-2px;
  height: var(--lidBot);
  border-top: 2px solid #111;
  border-radius: 80px 80px 0 0;
  transition: height 0.12s linear;
}

/* subtle ambient glow behind eyes */
.eye::after{
  content:"";
  position:absolute;
  top:60px;
  left:50%;
  transform: translateX(-50%);
  width:160px;
  height:90px;
  background: radial-gradient(circle at 50% 40%, rgba(255,179,0,0.20), rgba(0,0,0,0) 62%);
  filter: blur(1px);
  z-index:1;
  opacity:.9;
}

/* MOODS (feel) */
.eye.mood-normal{
  --lidTop: 0%;
  --lidBot: 0%;
  --browY: 0px;
  --browRot: 0deg;
}
.eye.mood-reading{
  --lidTop: 38%;
  --lidBot: 0%;
  --browY: 2px;
  --browRot: 0deg;
}
.eye.mood-suspicious{
  --lidTop: 44%;
  --lidBot: 10%;
  --browY: 8px;
  --browRot: -6deg;
}
.eye.mood-angry{
  --lidTop: 52%;
  --lidBot: 18%;
  --browY: 12px;
  --browRot: 14deg;
}
.eye.mood-happy{
  --lidTop: 10%;
  --lidBot: 42%;
  --browY: -8px;
  --browRot: 0deg;
}
.eye.mood-sad{
  --lidTop: 52%;
  --lidBot: 6%;
  --browY: -2px;
  --browRot: -10deg;
}
.eye.mood-shock{
  --lidTop: 0%;
  --lidBot: 0%;
  --browY: -14px;
  --browRot: 0deg;
}
.eye.mood-shock .eye-border{ transform: scale(1.05); }

/* micro-saccade feel */
@keyframes saccade{
  0%, 100% { transform: translate(-50%, -50%) translate(var(--gx), var(--gy)); }
  40% { transform: translate(-50%, -50%) translate(calc(var(--gx) + 2px), calc(var(--gy) - 1px)); }
  65% { transform: translate(-50%, -50%) translate(calc(var(--gx) - 1px), calc(var(--gy) + 1px)); }
}
.eye.idle .iris-group{ animation: saccade 2.8s ease-in-out infinite; }

/* CHAT */
.chat-area{
  flex:1;
  padding: 18px 16px;
  display:flex;
  flex-direction:column;
  gap: 12px;
  overflow-y:auto;
}
.chat-area::-webkit-scrollbar{ width:0; }

.msg{
  max-width:86%;
  padding: 12px 14px;
  border-radius: 16px;
  font-size: 15px;
  line-height:1.45;
  animation: pop .22s ease;
}
@keyframes pop{ from{transform:translateY(8px);opacity:0} to{transform:translateY(0);opacity:1} }

.msg.caynana{
  align-self:flex-start;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  border-left: 3px solid rgba(255,179,0,0.9);
  box-shadow: 0 10px 20px rgba(0,0,0,0.25);
}
.msg.user{
  align-self:flex-end;
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.10);
}

/* INPUT */
.input-dock{
  padding: 14px 14px 24px;
  background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.70), transparent);
}
input{
  width:100%;
  background: rgba(10,10,10,0.75);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 18px;
  padding: 14px 16px;
  color:#fff;
  font-size:16px;
  outline:none;
  transition:.2s;
}
input:focus{
  border-color: rgba(255,179,0,0.5);
  box-shadow: 0 0 0 3px rgba(255,179,0,0.10);
}

/* ‚Äúhis‚Äù i√ßin k√º√ß√ºk titre≈üimler */
@keyframes angerJitter { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-1px)} 75%{transform:translateX(1px)} }
@keyframes happyBounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-2px)} }
@keyframes sadDroop   { 0%,100%{transform:translateY(0)} 50%{transform:translateY(2px)} }

.eye.fx-angry{ animation: angerJitter .18s ease-in-out 6; }
.eye.fx-happy{ animation: happyBounce .35s ease-in-out 4; }
.eye.fx-sad{ animation: sadDroop .5s ease-in-out 3; }

</style>
</head>
<body>

<div class="phone" id="phone">

  <header class="topbar">
    <button class="menuBtn" aria-label="Men√º">‚ò∞</button>
    <div class="rightDot"></div>
  </header>

  <div class="statusPill" id="statusPill">Caynana: Hazƒ±r</div>

  <div class="header">
    <div class="eyes-container">

      <div class="eye mood-normal idle" id="eyeL">
        <div class="brow"></div>
        <div class="lashes"></div>
        <div class="liner"></div>

        <div class="eye-clip">
          <div class="eye-border"></div>
          <div class="iris-group">
            <div class="iris">
              <div class="pupil"></div>
              <div class="spec"></div>
              <div class="gloss"></div>
            </div>
          </div>
          <div class="lid-top"></div>
          <div class="lid-bot"></div>
        </div>
      </div>

      <div class="eye mood-normal idle" id="eyeR">
        <div class="brow"></div>
        <div class="lashes"></div>
        <div class="liner"></div>

        <div class="eye-clip">
          <div class="eye-border"></div>
          <div class="iris-group">
            <div class="iris">
              <div class="pupil"></div>
              <div class="spec"></div>
              <div class="gloss"></div>
            </div>
          </div>
          <div class="lid-top"></div>
          <div class="lid-bot"></div>
        </div>
      </div>

    </div>
  </div>

  <div class="chat-area" id="chatArea">
    <div class="msg caynana">
      G√∂z√ºm √ºzerinde‚Ä¶<br>
      Yaz bakalƒ±m, ne anlatacaksƒ±n?
    </div>
  </div>

  <div class="input-dock">
    <input type="text" id="userInput" placeholder="Buraya yazarken bana bakma..." autocomplete="off">
  </div>

</div>

<script>
const phone = document.getElementById('phone');
const chatArea = document.getElementById('chatArea');
const input = document.getElementById('userInput');
const body = document.body;

const eyeL = document.getElementById('eyeL');
const eyeR = document.getElementById('eyeR');
const eyes = [eyeL, eyeR];

function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

function addMessage(text, type){
  const div = document.createElement('div');
  div.className = `msg ${type}`;
  div.innerHTML = text;
  chatArea.appendChild(div);
  chatArea.scrollTop = chatArea.scrollHeight;
}

function clearFx(){
  eyes.forEach(e=>{
    e.classList.remove('fx-angry','fx-happy','fx-sad');
  });
}

function setMood(mood){
  eyes.forEach(e=>{
    e.classList.remove(
      'mood-normal','mood-reading','mood-suspicious','mood-angry','mood-happy','mood-sad','mood-shock'
    );
    e.classList.add('mood-' + mood);
  });

  clearFx();
  if(mood==='angry'){ eyes.forEach(e=>e.classList.add('fx-angry')); }
  if(mood==='happy'){ eyes.forEach(e=>e.classList.add('fx-happy')); }
  if(mood==='sad'){ eyes.forEach(e=>e.classList.add('fx-sad')); }

  // ‚Äúhis‚Äù i√ßin kƒ±sa s√ºre sonra fx s√∂nd√ºr
  setTimeout(clearFx, 900);
}

/* gaze control: set vars (clamped) */
function setGaze(px, py){
  // px,py in pixels
  const x = clamp(px, -12, 12);
  const y = clamp(py, -9, 9);
  eyes.forEach(e=>{
    e.style.setProperty('--gx', x.toFixed(1) + 'px');
    e.style.setProperty('--gy', y.toFixed(1) + 'px');
  });
}

/* pointer follow (only when not typing) */
function followPointer(x, y){
  const rect = phone.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + 120; // header bias
  const nx = (x - cx) / (rect.width/2);
  const ny = (y - cy) / (rect.height/2);
  setGaze(nx * 12, ny * 9);
}

document.addEventListener('mousemove', (e)=>{
  if(input === document.activeElement) return;
  followPointer(e.clientX, e.clientY);
});

document.addEventListener('touchmove', (e)=>{
  if(input === document.activeElement) return;
  if(!e.touches || !e.touches[0]) return;
  followPointer(e.touches[0].clientX, e.touches[0].clientY);
}, {passive:true});

/* reading mode when typing */
input.addEventListener('focus', ()=>{
  body.classList.add('keyboard-open');
  setMood('reading');
  // look down a bit
  setGaze(0, 7);
});
input.addEventListener('blur', ()=>{
  body.classList.remove('keyboard-open');
  setMood('normal');
});

/* typing: subtle reading scan */
let typingT = 0;
input.addEventListener('input', ()=>{
  if(input !== document.activeElement) return;
  typingT += 1;
  const wiggle = (Math.random()-0.5) * 3;
  setGaze(wiggle, 7 + (Math.random()*1.5));
});

/* emotion from text */
function detectMood(text){
  const t = text.toLowerCase();

  // angry / harsh
  if (t.includes("nefret") || t.includes("aptal") || t.includes("sinir") || t.includes("kƒ±zgƒ±n") || t.includes("yeter")) return "angry";
  // happy
  if (t.includes("hahaha") || t.includes("üòÇ") || t.includes("komik") || t.includes("g√ºzel") || t.includes("te≈üekk√ºr")) return "happy";
  // sad
  if (t.includes("√ºzg√ºn") || t.includes("k√∂t√º") || t.includes("√∂ld√º") || t.includes("aƒülƒ±") || t.includes("canƒ±m acƒ±yor")) return "sad";
  // shock
  if (t.includes("inanmƒ±yorum") || t.includes("yuh") || t.includes("≈üok") || t.includes("neee") || t.includes("ciddi misin")) return "shock";
  // suspicious
  if (t.includes("para") || t.includes("yalan") || t.includes("bence") || t.includes("emin misin") || t.includes("hmm")) return "suspicious";

  return "normal";
}

/* Enter -> respond */
input.addEventListener('keypress', (e)=>{
  if(e.key === 'Enter' && input.value.trim() !== ''){
    const userText = input.value.trim();
    addMessage(userText, 'user');
    input.value = '';
    input.blur();

    const mood = detectMood(userText);
    setMood(mood);

    setTimeout(()=>{
      let response = "Ee sonra? Seni dinliyorum, devam et.";
      if(mood==='angry') response = "Bak bak‚Ä¶ sesini ayarla. Benim sabrƒ±m var ama sƒ±nƒ±rƒ± da var.";
      if(mood==='happy') response = "Ay ilahi‚Ä¶ g√ºld√ºrd√ºn ya. Hadi anlat devamƒ±nƒ±.";
      if(mood==='sad') response = "Kƒ±yamam‚Ä¶ gel otur. √ñnce bir nefes al, sonra anlat.";
      if(mood==='shock') response = "Neeey? Dur. Bir saniye‚Ä¶ ≈üimdi en ba≈ütan, tane tane anlat!";
      if(mood==='suspicious') response = "Hƒ±mm‚Ä¶ burada bir i≈ü var. Detay ver, ka√ßƒ±rma.";

      addMessage(response, 'caynana');

      // back to normal after a bit
      setTimeout(()=>setMood('normal'), 2200);
    }, 520);
  }
});

/* default */
setMood('normal');
setGaze(0, 0);
</script>

</body>
</html>

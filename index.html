<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Caynana AI v6.0</title>
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="/css/style.css?v=2" />
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    /* =========================================================
       GLOBAL & RESET
       ========================================================= */
    :root{
      --gold:#ffb300;
      --pistachio:#bef264;
      --bg-dark:#000;
      --panel-bg:#111;
      --border: rgba(255,255,255,.10);
      --muted: rgba(255,255,255,.72);

      /* Layout heights */
      --topbar-h: 64px;
      --inputdock-h: 86px;     /* JS √∂l√ß√ºp g√ºncelleyecek */
      --assistantbar-h: 78px;  /* quick access */
      --footerlinks-h: 36px;   /* hakkƒ±mƒ±zda/sss/gizlilik/ileti≈üim */
      --footerbrand-h: 26px;   /* @CaynanaAI ... */
      --bottom-stack: calc(var(--assistantbar-h) + var(--footerlinks-h) + var(--footerbrand-h));
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; outline:none; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--bg-dark);
      color:#eee;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      overflow:hidden;
    }

    /* =========================================================
       APP LAYOUT
       ========================================================= */
    .mobile-frame{
      position:relative;
      height:100vh;
      width:100%;
      overflow:hidden;
      background:#000;
    }

    /* =========================================================
       TOPBAR (MUST-HAVE - logged in)
       ========================================================= */
    .topbar{
      position:absolute;
      left:0; right:0; top:0;
      height:var(--topbar-h);
      z-index:4000;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 12px;
      border-bottom:1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
    }

    .left-controls{ display:flex; align-items:center; gap:10px; }
    .hamb-btn{
      width:42px; height:42px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      font-size:18px;
      cursor:pointer;
    }
    .hamb-btn:active{ transform: translateY(1px); filter: brightness(.95); }

    .brand-wrapper{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:2px;
      min-width: 0;
      flex: 1;
    }
    .logo-area{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      min-width:0;
    }
    .brand-name{
      font-weight:900;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 160px;
    }
    .slogan{
      font-size:11px;
      color: rgba(255,255,255,.65);
      font-weight:700;
      text-align:center;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 240px;
    }

    /* Tahtaravalli animasyonu */
    .seesaw-svg{ width:42px; height:20px; }
    .seesaw-bar{ transform-origin: 20px 8px; animation: seesaw 2.1s ease-in-out infinite; }
    @keyframes seesaw{
      0%{ transform: rotate(-5deg); }
      50%{ transform: rotate(5deg); }
      100%{ transform: rotate(-5deg); }
    }

    .right-controls{
      display:flex;
      align-items:flex-end;
      gap:8px;
      min-width: 120px;
      justify-content:flex-end;
    }

    .notif-row{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
      position:relative;
    }
    .notif-topline{ display:flex; align-items:center; gap:10px; }
    .icon-btn-top{
      width:42px; height:42px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
    .icon-btn-top svg{ width:22px; height:22px; fill:none; stroke:#fff; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; opacity:.9; }
    .badge{
      position:absolute;
      right: 62px;
      top: 10px;
      width: 8px; height: 8px;
      border-radius: 99px;
      background: var(--gold);
      display:none;
    }

    .plan-chip{
      font-size:10px;
      font-weight:900;
      padding:6px 10px;
      border-radius:99px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.78);
      letter-spacing:.3px;
    }

    /* S.P + grafik + sayƒ± (y√ºzde i≈üareti yok) */
    .yp-chip{
      width: 120px;
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:flex-end;
    }
    .yp-label{
      font-size:10px;
      font-weight:900;
      color: rgba(255,255,255,.75);
      letter-spacing:.2px;
    }
    .yp-meter{
      width: 120px;
      height: 8px;
      border-radius: 99px;
      background: rgba(255,255,255,.08);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.08);
    }
    .yp-fill{
      height:100%;
      width: 19%;
      background: linear-gradient(90deg, var(--pistachio), var(--gold));
    }
    .yp-num{
      font-size:10px;
      font-weight:900;
      color: rgba(255,255,255,.78);
      letter-spacing:.2px;
    }

    /* =========================================================
       MENU OVERLAY (SIDEBAR)
       ========================================================= */
    .menu-overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.80);
      z-index:5000;
      opacity:0;
      pointer-events:none;
      transition:.25s;
      display:flex;
    }
    .menu-overlay.open{ opacity:1; pointer-events:auto; }
    .menu-sidebar{
      width:280px;
      height:100%;
      background:#111;
      transform: translateX(-100%);
      transition:.28s cubic-bezier(.2,.8,.2,1);
      display:flex;
      flex-direction:column;
      border-right:1px solid #333;
      padding:20px;
      overflow-y:auto;
    }
    .menu-overlay.open .menu-sidebar{ transform: translateX(0); }

    /* Profil kƒ±sayol (sende vardƒ±, dokunmadƒ±m) */
    .profile-shortcut-wrap{ margin:10px 0 14px; }
    .profile-shortcut-btn{
      display:flex; align-items:center; gap:12px;
      padding:12px 14px;
      border-radius:18px;
      cursor:pointer; user-select:none;
      background: linear-gradient(135deg, rgba(40,25,5,.95), rgba(15,10,5,.98));
      border:1px solid rgba(255,179,0,.35);
      box-shadow: 0 8px 20px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.08);
      transition: all .15s ease;
    }
    .profile-shortcut-btn:active{ transform: translateY(1px); filter: brightness(.95); }
    #profileShortcutIco{
      width:36px; height:36px; flex:0 0 36px;
      border-radius:50%;
      overflow:hidden;
      display:flex; align-items:center; justify-content:center;
      background: var(--gold);
      border: 2px solid rgba(255,179,0,.6);
      color:#111;
      font-size:18px;
    }
    #profileShortcutIco img{ width:100%; height:100%; object-fit:cover; }
    .profile-shortcut-title{ font-weight:800; color: var(--gold); font-size:13px; text-transform:uppercase; }
    .profile-shortcut-sub{ font-size:13px; font-weight:600; color: rgba(255,255,255,.9); }

    /* =========================================================
       CHAT AREA (scroll inside)
       ========================================================= */
    .chat-area{
      position:absolute;
      left:0; right:0;
      top: var(--topbar-h);
      bottom: calc(var(--bottom-stack) + var(--inputdock-h));
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;

      display:flex;
      flex-direction:column;
      justify-content:flex-end; /* a≈üaƒüƒ±dan yukarƒ± */
      padding: 14px 12px;
      min-height:0;
    }
    .chat-area:empty::before{ display:none; }

    /* =========================================================
       INPUT DOCK (fixed above quick access)
       ========================================================= */
    .input-dock{
      position:fixed;
      left:0; right:0;
      bottom: var(--bottom-stack);
      z-index: 3200;
      padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      background: linear-gradient(to top, rgba(0,0,0,.92), rgba(0,0,0,.45));
      border-top: 1px solid rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
    }
    .dock-inner{
      display:flex;
      align-items:flex-end;
      gap:10px;
      max-width: 920px;
      margin: 0 auto;
    }
    .icon-btn, .send-btn{
      width:44px; height:44px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
    }
    .icon-btn:active, .send-btn:active{ transform: translateY(1px); filter: brightness(.95); }
    .icon-btn svg, .send-btn svg{
      width:22px; height:22px; fill:none; stroke:#fff; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; opacity:.95;
    }
    #msgInput{
      flex:1;
      min-height:44px;
      max-height:120px;
      resize:none;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color:#fff;
      padding: 12px 12px;
      font-size:14px;
      line-height:18px;
      outline:none;
    }
    #msgInput::placeholder{ color: rgba(255,255,255,.45); }
    #msgInput:focus{ outline:none; box-shadow:none; }

    /* =========================================================
       FOOTER (MUST-HAVE - logged in)
       - En altta brand
       - √úst√ºnde links
       ========================================================= */
    .footer-brand-fixed{
      position:fixed;
      left:0; right:0;
      bottom:0;
      height: var(--footerbrand-h);
      z-index: 2800;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 11px;
      font-weight: 800;
      color: rgba(255,255,255,.55);
      border-top: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.92);
      padding-bottom: env(safe-area-inset-bottom);
    }
    .footer-links-fixed{
      position:fixed;
      left:0; right:0;
      bottom: var(--footerbrand-h);
      height: var(--footerlinks-h);
      z-index: 2850;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 18px;
      font-size: 12px;
      font-weight: 800;
      background: rgba(0,0,0,.92);
      border-top: 1px solid rgba(255,255,255,.06);
      padding: 0 12px;
      overflow-x:auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width:none;
    }
    .footer-links-fixed::-webkit-scrollbar{ display:none; }
    .footer-links-fixed a{
      color: rgba(255,255,255,.70);
      text-decoration:none;
      white-space:nowrap;
    }
    .footer-links-fixed a:active{ opacity:.85; }

    /* =========================================================
       QUICK ACCESS (MUST-HAVE - logged in)
       - Sƒ±ra: Sohbet / Alƒ±≈üveri≈ü / Terc√ºman / Dedikodu / Fal /
               Tarot / Bur√ß / R√ºya / Diyet / Saƒülƒ±k
       - Tek parmak kaydƒ±rma (horizontal scroll)
       - Aktif ikon farklƒ± renkte
       ========================================================= */
    .assistant-bar{
      position:fixed;
      left:0; right:0;
      bottom: calc(var(--footerbrand-h) + var(--footerlinks-h));
      height: var(--assistantbar-h);
      z-index: 2900;

      display:flex;
      align-items:center;
      gap: 12px;
      padding: 10px 14px;

      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;

      background: rgba(0,0,0,.92);
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .assistant-bar::-webkit-scrollbar{ display:none; }

    .nav-item{
      flex: 0 0 auto;
      min-width: 76px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 6px;
      padding: 10px 12px;
      border-radius: 16px;

      color: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      user-select:none;

      transition: transform .15s ease, background .15s ease, border-color .15s ease, color .15s ease;
    }
    .nav-item:hover, .nav-item:active{
      transform: translateY(-2px);
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.14);
      color:#fff;
    }
    .nav-icon{
      width: 22px; height: 22px;
      fill:none;
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      opacity: .95;
    }
    .nav-label{
      font-size: 10px;
      font-weight: 900;
      letter-spacing: .2px;
      text-transform: uppercase;
      opacity: .92;
      white-space:nowrap;
    }

    /* Aktif state */
    .nav-item.active{
      color: var(--gold);
      border-color: rgba(255,179,0,.35);
      background: rgba(255,179,0,.07);
    }

    /* =========================================================
       OVERLAYS
       ========================================================= */
    .full-overlay{
      position:fixed;
      inset:0;
      width:100vw; height:100vh;
      background:#000;
      z-index:9000;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      pointer-events:none;
      transition: opacity .28s ease;
    }
    .full-overlay.active{ opacity:1; pointer-events:auto; }

    #loginOverlay{ z-index:9900; background: rgba(0,0,0,.95); }
    #termsOverlay{ z-index:9950; background: rgba(0,0,0,.97); }

    .login-card{
      width:min(420px, 92vw);
      background: rgba(17,17,17,.85);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      padding: 22px 18px 16px;
      box-shadow: 0 18px 50px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.06);
      position:relative;
      backdrop-filter: blur(12px);
    }

    .login-header{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 8px;
      margin-bottom: 14px;
      text-align:center;
    }

    .login-seesaw{
      width: 64px;
      height: 34px;
      margin-bottom: 4px;
    }
    .login-seesaw .seesaw-bar{ transform-origin: 20px 8px; animation: seesaw 2.1s ease-in-out infinite; }

    .login-title{
      font-size: 24px;
      font-weight: 950;
      letter-spacing: .2px;
    }
    .login-subtitle{
      font-size: 12px;
      font-weight: 800;
      color: rgba(255,255,255,.72);
    }
    .login-free{
      margin-top: 10px;
      font-size: 13px;
      font-weight: 900;
      color: rgba(255,255,255,.78);
    }

    .btn-3d{
      width: 100%;
      border: none;
      border-radius: 16px;
      padding: 14px 14px;
      font-weight: 950;
      letter-spacing: .2px;
      cursor: pointer;
      transition: transform .12s ease, filter .12s ease;
      box-shadow: 0 10px 24px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      margin-top: 12px;
    }
    .btn-3d:active{ transform: translateY(1px); filter: brightness(.96); }

    .btn-google{
      background: linear-gradient(135deg, rgba(255,179,0,.95), rgba(255,140,0,.95));
      color:#111;
      border: 1px solid rgba(255,255,255,.12);
    }
    .btn-apple{
      background: linear-gradient(135deg, rgba(255,255,255,.15), rgba(255,255,255,.06));
      color:#fff;
      border: 1px solid rgba(255,255,255,.12);
    }

    .login-footer-links{
      margin-top: 14px;
      display:flex;
      justify-content:center;
      gap: 18px;
      font-size: 12px;
      font-weight: 900;
    }
    .login-footer-links a{
      color: rgba(255,255,255,.65);
      text-decoration:none;
    }
    .login-footer-brand{
      margin-top: 10px;
      text-align:center;
      font-size: 11px;
      font-weight: 900;
      color: rgba(255,255,255,.45);
    }

    /* =========================================================
       Logged-in gating (must-have elements hidden when not logged)
       ========================================================= */
    body:not(.is-logged) .topbar,
    body:not(.is-logged) .menu-overlay,
    body:not(.is-logged) .chat-area,
    body:not(.is-logged) .input-dock,
    body:not(.is-logged) .assistant-bar,
    body:not(.is-logged) .footer-links-fixed,
    body:not(.is-logged) .footer-brand-fixed{
      display:none !important;
    }

    /* notif dropdown vs (sende vardƒ± kalsƒ±n) */
    .notification-dropdown{ display:none; }

    /* k√º√ß√ºk yardƒ±mcƒ± */
    .toast{
      position:fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(var(--bottom-stack) + var(--inputdock-h) + 10px);
      z-index: 9999;
      background: rgba(0,0,0,.85);
      border:1px solid rgba(255,255,255,.12);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 12px;
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease;
      max-width: 92vw;
      text-align:center;
    }
    .toast.show{ opacity:1; }
  </style>
</head>

<body>
<div class="mobile-frame" id="mobileFrame">

  <!-- ========================= TOPBAR ========================= -->
  <div class="topbar">
    <div class="left-controls">
      <button class="hamb-btn" id="hambBtn">‚ò∞</button>
    </div>

    <div class="brand-wrapper" id="brandWrapper">
      <div class="logo-area">
        <svg class="seesaw-svg" viewBox="0 0 40 20" aria-hidden="true">
          <g class="seesaw-bar" id="seesawBar">
            <line x1="0" y1="8" x2="40" y2="8" stroke="#ccc" stroke-width="2" stroke-linecap="round" />
            <circle cx="3" cy="5" r="3" fill="#bef264" />
            <circle cx="37" cy="5" r="3" fill="#ffb300" id="orangeBall" />
          </g>
          <polygon points="17,14 23,14 20,8" fill="none" stroke="#666" stroke-width="1.5" />
        </svg>
        <div class="brand-name">CaynanaAI</div>
      </div>
      <div class="slogan">Yapay Zek√¢nƒ±n Geleneksel Aklƒ±</div>
    </div>

    <div class="right-controls">
      <div class="notif-row">
        <div class="notif-topline">
          <button class="icon-btn-top" id="notifBtn" aria-label="Bildirimler">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <div class="badge" id="notifBadge"></div>
          </button>
          <div id="planChip" class="plan-chip">FREE</div>
        </div>

        <div class="notification-dropdown" id="notifDropdown">
          <div class="notif-header">Bildirimler</div>
          <div class="notif-list" id="notifList"></div>
        </div>

        <div class="yp-chip">
          <div class="yp-label">S.P</div>
          <div class="yp-meter"><div class="yp-fill" id="ypFill"></div></div>
          <div class="yp-num" id="ypNum">19</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========================= SIDEBAR OVERLAY ========================= -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="menu-sidebar">
      <button class="new-chat-btn" id="newChatBtn"><span>+</span> YENƒ∞ SOHBET BA≈ûLAT</button>

      <div class="profile-shortcut-wrap" id="profileShortcutMount">
        <div class="profile-shortcut-btn" id="profileShortcutBtn">
          <div class="profile-shortcut-ico" id="profileShortcutIco">üë§</div>
          <div class="profile-shortcut-text">
            <div class="profile-shortcut-title">Profil D√ºzenle</div>
            <div class="profile-shortcut-sub" id="profileShortcutName">‚Äî</div>
          </div>
        </div>
      </div>

      <div class="section-title" id="historyTitle">GE√áMƒ∞≈û SOHBETLER</div>
      <div class="history-list" id="historyList"></div>

      <div class="menu-block asistan">
        <div class="block-head">Asistan</div>
        <div class="menu-grid" id="menuAsistan"></div>
      </div>

      <div class="menu-block astro">
        <div class="block-head">Astro AI</div>
        <div class="menu-grid" id="menuAstro"></div>
      </div>

      <div class="menu-block kurumsal">
        <div class="block-head">Kurumsal</div>
        <div class="menu-grid" id="menuKurumsal"></div>
      </div>

      <div class="menu-footer-actions">
        <a class="action-link" id="logoutBtn">üõ°Ô∏è G√ºvenli √áƒ±kƒ±≈ü</a>
        <a class="action-link delete-acc" id="deleteAccountBtn">üóëÔ∏è Hesabƒ±mƒ± Sil</a>
      </div>
    </div>
  </div>

  <!-- ========================= CHAT ========================= -->
  <div class="chat-area" id="chat"></div>

  <!-- ========================= INPUT DOCK ========================= -->
  <div class="input-dock">
    <div class="dock-inner">
      <button class="icon-btn" id="camBtn" aria-label="Kamera">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
          <circle cx="12" cy="13" r="4"></circle>
        </svg>
      </button>

      <textarea id="msgInput" rows="1" placeholder="Ne lazƒ±m evladƒ±m?" spellcheck="false"></textarea>

      <button class="icon-btn" id="micBtn" aria-label="Mikrofon">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
          <line x1="12" y1="19" x2="12" y2="23"></line>
          <line x1="8" y1="23" x2="16" y2="23"></line>
        </svg>
      </button>

      <button class="send-btn" id="sendBtn" aria-label="G√∂nder">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M22 2L11 13"></path>
          <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- ========================= QUICK ACCESS (MUST-HAVE) ========================= -->
  <div class="assistant-bar" id="assistantBar">

    <!-- Sohbet -->
    <div class="nav-item" data-path="/" data-href="/" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"></path>
        <path d="M8 9h8"></path>
        <path d="M8 13h6"></path>
      </svg>
      <div class="nav-label">Sohbet</div>
    </div>

    <!-- Alƒ±≈üveri≈ü -->
    <div class="nav-item" data-path="/pages/alisveris.html" data-href="/pages/alisveris.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6 6h15l-1.5 9h-12z"></path>
        <path d="M6 6l-2-3H1"></path>
        <circle cx="9" cy="20" r="1.6"></circle>
        <circle cx="18" cy="20" r="1.6"></circle>
      </svg>
      <div class="nav-label">Alƒ±≈üveri≈ü</div>
    </div>

    <!-- Terc√ºman -->
    <div class="nav-item" data-path="/pages/tercuman.html" data-href="/pages/tercuman.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M4 5h7"></path>
        <path d="M7.5 5c0 6-3.5 9-3.5 9"></path>
        <path d="M10 14l-2.5-2.5"></path>
        <path d="M14 19l4-10h2l4 10"></path>
        <path d="M16 15h6"></path>
      </svg>
      <div class="nav-label">Terc√ºman</div>
    </div>

    <!-- Dedikodu -->
    <div class="nav-item" data-path="/pages/dedikodu.html" data-href="/pages/dedikodu.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 20l-7 3V6a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3h-6z"></path>
        <path d="M8 9h8"></path>
        <path d="M8 12h5"></path>
      </svg>
      <div class="nav-label">Dedikodu</div>
    </div>

    <!-- Fal -->
    <div class="nav-item" data-path="/pages/fal.html" data-href="/pages/fal.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M20 3H4v10a4 4 0 0 0 4 4h6a4 4 0 0 0 4-4V10h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"></path>
        <path d="M4 19h16"></path>
      </svg>
      <div class="nav-label">Fal</div>
    </div>

    <!-- Tarot -->
    <div class="nav-item" data-path="/pages/tarot.html" data-href="/pages/tarot.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <rect x="6" y="3" width="12" height="18" rx="2"></rect>
        <path d="M9 8h6"></path>
        <path d="M9 12h6"></path>
        <path d="M9 16h4"></path>
      </svg>
      <div class="nav-label">Tarot</div>
    </div>

    <!-- Bur√ß -->
    <div class="nav-item" data-path="/pages/astro.html" data-href="/pages/astro.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <circle cx="12" cy="12" r="9"></circle>
        <path d="M7 12h10"></path>
      </svg>
      <div class="nav-label">Bur√ß</div>
    </div>

    <!-- R√ºya -->
    <div class="nav-item" data-path="/pages/ruya.html" data-href="/pages/ruya.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6S2 12 2 12z"></path>
        <circle cx="12" cy="12" r="2.5"></circle>
      </svg>
      <div class="nav-label">R√ºya</div>
    </div>

    <!-- Diyet -->
    <div class="nav-item" data-path="/pages/diyet.html" data-href="/pages/diyet.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <circle cx="12" cy="12" r="9"></circle>
        <path d="M12 3v9l4 4"></path>
      </svg>
      <div class="nav-label">Diyet</div>
    </div>

    <!-- Saƒülƒ±k -->
    <div class="nav-item" data-path="/pages/saglik.html" data-href="/pages/saglik.html" role="button" tabindex="0">
      <svg class="nav-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 21s-8-4.5-8-11a4.5 4.5 0 0 1 8-2.5A4.5 4.5 0 0 1 20 10c0 6.5-8 11-8 11z"></path>
        <path d="M8 11h3l1-2 2 5 1-3h3"></path>
      </svg>
      <div class="nav-label">Saƒülƒ±k</div>
    </div>

  </div>

  <!-- ========================= FOOTER LINKS (MUST-HAVE) ========================= -->
  <div class="footer-links-fixed">
    <a href="/pages/hakkimizda.html">Hakkƒ±mƒ±zda</a>
    <a href="/pages/sss.html">SSS</a>
    <a href="/pages/gizlilik.html">Gizlilik</a>
    <a href="/pages/iletisim.html">ƒ∞leti≈üim</a>
  </div>

  <!-- ========================= FOOTER BRAND (MUST-HAVE) ========================= -->
  <div class="footer-brand-fixed">@CaynanaAI By Ozyigit's 2026</div>

</div>

<!-- ========================= LOGIN OVERLAY ========================= -->
<div class="full-overlay active" id="loginOverlay">
  <div class="login-card">
    <div class="login-header">
      <svg class="login-seesaw" viewBox="0 0 40 20" aria-hidden="true">
        <g class="seesaw-bar">
          <line x1="0" y1="8" x2="40" y2="8" stroke="#ccc" stroke-width="2" stroke-linecap="round" />
          <circle cx="3" cy="5" r="3" fill="#bef264" />
          <circle cx="37" cy="5" r="3" fill="#ffb300" />
        </g>
        <polygon points="17,14 23,14 20,8" fill="none" stroke="#666" stroke-width="1.5" />
      </svg>

      <div class="login-title">CaynanaAI</div>
      <div class="login-subtitle">Yapay Zek√¢nƒ±n Geleneksel Aklƒ±</div>
      <div class="login-free">√úyelik √úcretsizdir.</div>
    </div>

    <button class="btn-3d btn-google" id="googleLoginBtn">Google Hesabƒ±n ƒ∞le Giri≈ü Yap</button>
    <div id="googleBtnWrap" style="display:none;"></div>

    <button class="btn-3d btn-apple" id="appleLoginBtn">Apple Hesabƒ±n ƒ∞le Giri≈ü Yap</button>

    <div class="login-footer-links">
      <a href="/pages/hakkimizda.html">Hakkƒ±mƒ±zda</a>
      <a href="/pages/iletisim.html">ƒ∞leti≈üim</a>
    </div>
    <div class="login-footer-brand">@CaynanaAI By Ozyigit's 2026</div>
  </div>
</div>

<!-- ========================= TERMS OVERLAY ========================= -->
<div class="full-overlay" id="termsOverlay">
  <div class="login-card">
    <div class="brand-name" style="text-align:center; font-size:18px; font-weight:950;">S√∂zle≈üme</div>

    <button id="closeTermsBtn"
      style="position:absolute; top:12px; right:12px; width:40px; height:40px; border-radius:14px;
             background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10); color:#fff; font-size:20px; cursor:pointer;">√ó</button>

    <iframe id="termsFrame" src="/pages/sozlesme.html"
      style="width:100%; height:320px; border:1px solid rgba(255,255,255,.12); margin:14px 0; background:#fff; border-radius:14px;"></iframe>

    <div style="display:flex; gap:10px; align-items:center; margin-bottom:14px;">
      <input type="checkbox" id="termsCheck" style="width:18px; height:18px;">
      <label for="termsCheck" style="font-size:12px; font-weight:900; color:rgba(255,255,255,.85);">Onaylƒ±yorum</label>
    </div>

    <button id="termsAcceptBtn"
      style="width:100%; padding:14px; background:var(--gold); border:none; border-radius:16px; font-weight:950; cursor:pointer; box-shadow:0 10px 24px rgba(0,0,0,.45);">
      Giri≈ü Yap
    </button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>window.CAYNANA_TYPE_SPEED = 28;</script>
<script type="module" src="js/main.js"></script>

<script>
  // =========================
  // Helpers
  // =========================
  function showToast(msg){
    const t = document.getElementById("toast");
    if(!t) return;
    t.textContent = msg;
    t.classList.add("show");
    clearTimeout(window.__toastTimer);
    window.__toastTimer = setTimeout(()=>t.classList.remove("show"), 2200);
  }

  function setLoggedInUI(isLogged){
    document.body.classList.toggle("is-logged", !!isLogged);
    const loginOverlay = document.getElementById("loginOverlay");
    if(loginOverlay) loginOverlay.classList.toggle("active", !isLogged);
  }

  function openTerms(){
    const terms = document.getElementById("termsOverlay");
    if(terms) terms.classList.add("active");
  }
  function closeTerms(){
    const terms = document.getElementById("termsOverlay");
    if(terms) terms.classList.remove("active");
  }

  function measureInputDock(){
    const inputDock = document.querySelector(".input-dock");
    if(!inputDock) return;
    const h = Math.ceil(inputDock.getBoundingClientRect().height);
    if(h > 0) document.documentElement.style.setProperty("--inputdock-h", h + "px");
  }

  // Quick access active state
  function markActiveQuickAccess(){
    const path = location.pathname || "/";
    const items = document.querySelectorAll("#assistantBar .nav-item");
    items.forEach(it=>{
      const p = it.getAttribute("data-path");
      // Root (/) i√ßin hem "/" hem "/index.html" gibi ≈üeyleri yakalayalƒ±m
      const isActive =
        (p === "/" && (path === "/" || path.endsWith("/index.html"))) ||
        (p && p !== "/" && path.endsWith(p));
      it.classList.toggle("active", !!isActive);
    });
  }

  // =========================
  // Google One Tap / Button (tek tƒ±k hissi i√ßin)
  // Not: Sunucu tarafƒ± session kurulumuna g√∂re davranƒ±≈ü deƒüi≈üir.
  // =========================
  const GOOGLE_CLIENT_ID = window.CAYNANA_GOOGLE_CLIENT_ID || ""; // istersen main.js set edebilir
  let pendingGoogleCredential = null;

  function initGoogle(){
    if(!window.google || !google.accounts || !google.accounts.id){
      // script async geliyor olabilir
      return false;
    }
    if(!GOOGLE_CLIENT_ID){
      // Client ID yoksa butonu yine g√∂sterelim ama uyaralƒ±m
      console.warn("GOOGLE_CLIENT_ID missing. Set window.CAYNANA_GOOGLE_CLIENT_ID");
    }

    try{
      google.accounts.id.initialize({
        client_id: GOOGLE_CLIENT_ID,
        callback: (resp) => {
          // resp.credential: JWT
          pendingGoogleCredential = resp.credential || null;

          // Burada normalde backend'e g√∂nderip session a√ßarsƒ±n.
          // Demo: user varmƒ±≈ü gibi i√ßeri alalƒ±m (sen backend baƒülarsƒ±n).
          const termsAccepted =
            localStorage.getItem("caynana_terms_accepted_v1") === "1";

          // Kullanƒ±cƒ± profilini localStorage'a yaz (demo)
          localStorage.setItem("caynana_user_v1", JSON.stringify(user));

          // UI: login kapat, i√ßerik a√ß (ama s√∂zle≈üme ≈üart)
          if (!termsAccepted) {
            // ƒ∞lk defa: s√∂zle≈ümeye y√∂nlendir (overlay)
            openTermsOverlay();
          } else {
            // Daha √∂nce onayladƒ±: direkt i√ßeri
            enterApp();
          }

          // -------- Helpers --------

          function openTermsOverlay() {
            // Login overlay kapat, terms overlay a√ß
            loginOverlay.classList.remove("active");
            termsOverlay.classList.add("active");

            // Checkbox reset
            if (termsCheck) termsCheck.checked = false;

            // Accept butonunu pasif ba≈ülat
            if (termsAcceptBtn) {
              termsAcceptBtn.disabled = true;
              termsAcceptBtn.style.opacity = "0.6";
              termsAcceptBtn.style.cursor = "not-allowed";
            }
          }

          function enterApp() {
            // S√∂zle≈üme overlay kapat, login overlay kapat
            termsOverlay.classList.remove("active");
            loginOverlay.classList.remove("active");

            // Must-have alanlarƒ± g√∂ster
            document.body.classList.add("is-logged");

            // Profil kƒ±sayolunu g√ºncelle
            try {
              const u = JSON.parse(localStorage.getItem("caynana_user_v1") || "{}");
              const pic = u.picture || u.avatar;
              const name = u.fullname || "‚Äî";

              const ico = document.getElementById("profileShortcutIco");
              if (ico && pic) ico.innerHTML = `<img src="${pic}">`;

              const nm = document.getElementById("profileShortcutName");
              if (nm) nm.textContent = name;
            } catch (e) {}

            // (Opsiyonel) Chat alanƒ±nƒ± en alta kilitle
            const chat = document.getElementById("chat");
            if (chat) chat.scrollTop = chat.scrollHeight;
          }

          // -------- Terms UI events --------
          if (termsCheck && termsAcceptBtn) {
            termsCheck.addEventListener("change", () => {
              const ok = !!termsCheck.checked;
              termsAcceptBtn.disabled = !ok;
              termsAcceptBtn.style.opacity = ok ? "1" : "0.6";
              termsAcceptBtn.style.cursor = ok ? "pointer" : "not-allowed";
            });
          }

          if (termsAcceptBtn) {
            termsAcceptBtn.addEventListener("click", () => {
              if (termsCheck && !termsCheck.checked) return;

              // Onaylandƒ±
              localStorage.setItem("caynana_terms_accepted_v1", "1");

              // ƒ∞√ßeri al
              enterApp();
            });
          }

          if (closeTermsBtn) {
            closeTermsBtn.addEventListener("click", () => {
              // ƒ∞stersen kapattƒ±rma, ama senin akƒ±≈üa g√∂re kapatƒ±nca login'e d√∂ns√ºn:
              termsOverlay.classList.remove("active");
              loginOverlay.classList.add("active");
            });
          }

          // -------- Apple button --------
          if (appleLoginBtn) {
            appleLoginBtn.addEventListener("click", () => {
              showToast(
                "Apple biraz nazlƒ± evladƒ±m. Kƒ±sa s√ºre sonra a√ßƒ±lacak.\n≈ûimdilik Google hesabƒ±nla giri≈üi dene."
              );
            });
          }

          // -------- ‚ÄúTek tƒ±k‚Äù Google i√ßin notlar --------
          // √áift onay g√∂rmen genelde ≈üunlardan olur:
          // 1) Google Identity iki kez init/render ediliyor,
          // 2) Hem custom buton hem renderButton aynƒ± anda √ßalƒ±≈üƒ±yor,
          // 3) auto_select / one-tap kapalƒ± ve tarayƒ±cƒ± yeniden prompt istiyor.
          //
          // √á√∂z√ºm:
          // - googleLoginBtn sadece "googleBtnWrap click()" yapsƒ±n (renderButton tek yerde kalsƒ±n)
          // - One Tap a√ßmak istersen a≈üaƒüƒ±yƒ± ekleyebilirsin (bazƒ± cihazlarda otomatik √ßƒ±kar):
          //
          // google.accounts.id.prompt();  // init'ten sonra √ßaƒüƒ±r
          //
          // NOT: ‚ÄúGer√ßek anlamda‚Äù tek tƒ±k + sessiz giri≈ü i√ßin backend tarafƒ±nda session + refresh token stratejisi gerekir.
        }

        function showToast(msg) {
          const t = document.getElementById("toast");
          if (!t) return;
          t.textContent = msg;
          t.classList.add("show");
          clearTimeout(window.__toastTimer);
          window.__toastTimer = setTimeout(() => t.classList.remove("show"), 2800);
        }
      });
    </script>
